# dot tmux dot conf

# set tmux prefix to be `, not the default of <C-b>
unbind C-b
set -g prefix `
bind-key ` send-prefix

# for refreshing .tmux.conf
bind-key r source-file ~/.tmux.conf

# status keys -> vim
set -g status-keys vi

# for copying and pasting
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection

# turn on mouse mode - useful for some things
set -g mouse on

# https://vi.stackexchange.com/questions/444/how-do-i-reload-the-current-file
set -g focus-events on

# for vim
set -s escape-time 0

# set $TERM
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"

# set base tmux pane and session to be 1
set -g base-index 1
set -g pane-base-index 1

# set copy-mode keys to vi - this is already set by $EDITOR, probably, but just to force
set -g mode-keys vi

# renumber windows as lower windows are killed
set -g renumber-windows on

# don't rename windows automatically
set -g allow-rename off

# manually set history-limit
set -g history-limit 100000

# TODO: I'm not sure on this one
set -g set-clipboard on

# split windows
unbind %
bind-key s split-window -v
bind-key v split-window -h

# set -g pane-border-fg magenta
# set -g pane-active-border-fg green
# set -g pane-active-border-bg default
set -g window-style 'fg=default,bg=default'
set -g window-active-style 'fg=default,bg=default'
set -g pane-border-style default
set -g pane-active-border-style default

# Using pain-control for this now
# https://github.com/tmux-plugins/tmux-pain-control
# move around panes with hjkl
# bind h select-pane -L
# bind j select-pane -D
# bind k select-pane -U
# bind l select-pane -R
# resize panes
# bind < resize-pane -L 3
# bind > resize-pane -R 3
# bind - resize-pane -D 3
# bind + resize-pane -U 3

# how often to refresh statusbar
set -g status-interval 5

tm_icon="ðŸ‘¹ "

# Handled by tmux-colors-solarized
# set -g status-fg $tm_color_active
# set -g status-bg default
# set -g status-attr default
# tm_color_active=colour48
# tm_color_inactive=colour241

# raise the defaults
set -g status-left-length 60
set -g status-right-length 90

set -g @online_icon "âœ”"
set -g @offline_icon "âœ˜"

set -g status-left "#{prefix_highlight} | $tm_icon | #{session_name} | "
set -g status-right "#{online_status}  | #{battery_percentage} #{battery_remain} | #{cpu_percentage}% | %a %h-%d %R "

set -g @tpm_plugins '                  \
    tmux-plugins/tpm                   \
    tmux-plugins/tmux-resurrect        \
    tmux-plugins/tmux-continuum        \
    # tmux-plugins/tmux-pain-control     \
    tmux-plugins/tmux-prefix-highlight \
    tmux-plugins/tmux-battery          \
    tmux-plugins/tmux-cpu              \
    tmux-plugins/tmux-yank             \
    tmux-plugins/tmux-open             \
    tmux-plugins/tmux-online-status    \
    tmux-plugins/tmux-sessionist       \
    svanburen/tmux-colors-solarized    \
    yardnsm/tmux-1password             \
    christoomey/vim-tmux-navigator     \
'

set -g @colors-solarized 'light'

# I've taken this out because it ends up interfering with a lot of ways that I
# currently use a lot of terminal things

set -g @resurrect-strategy-vim 'session'
set -g @resurrect-strategy-nvim 'session'
# Don't want to auto restore
# set -g @continuum-restore 'on'

# broken at the moment
# tmux-plugins/tmux-copycat        \
# not all that sensible
# tmux-plugins/tmux-sensible       \

run '~/.tmux/plugins/tpm/tpm'
